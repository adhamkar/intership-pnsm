
<header class="logout">
  <div class="toframe">
    <button class="button1 btn2" (click)="changePwd()">
      modifier mot de passe
  </button>
    <button class=" button1 btn1" (click)="onLogout()">
      logout
  </button>
  <button type="button" class="btn-close close1" aria-label="Close" (click)="closeModal()"></button>
  </div>
</header>

<div class=" reduce">
  <div class="card bg-grd p-2 fs-7 text-white fw-bold text-center">
    Plan d’action des unités médicales mobiles (UMM)
</div>
<div class="close">
  <h5 class="h5">
    Détails du plan d'action
  </h5>

</div>


<div class="toCenter">
<form class="form-container" [formGroup]="myForm" (ngSubmit)="getPopulationData()">
  <div class="form" >
    <h5 class="pop">
      <mat-icon class="people">people</mat-icon>
      Population à couvrir par l'équipe mobile
    </h5>
    <h5 class="pop circle-icon">
      <u>Information sur la population :</u>
    </h5>
      <span>population rurale</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="population_rurale" required>
      <span>Les habitants de moins de 3km</span>
      <input placeholder="valeur"  type="number" class="input2" formControlName="population_habitantMoins3km" required>
      <span>Les habitants entre 3 et 6km</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="population_habitantEntre3km6km" required>
      <span>Les habitants entre 6 et 10km</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="population_habitantEntre6km10km" required>
      <span>Les habitants de plus 10km</span>
      <input placeholder="valeur"  type="number" class="input2" formControlName="population_habitantPlus10km" required>
      <span>La population cible</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="population_cible" required>
      <span>Distance moyenne de la route la plus proche</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="distanceMoyenneRouteProche" required>
      <span>Enfant id</span>
      <input placeholder="valeur"  type="number" class="input2" formControlName="enfant_id" required>
      <span>Naissances Attendues</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="enfant_naissancesAttendues" required>
      <span>Les enfants moins 1ans</span>
      <input placeholder="valeur"  type="number" class="input2" formControlName="enfant_moins1ans" required>
      <span>Les enfants moins 5ans</span>
      <input placeholder="valeur"  type="number" class="input2" formControlName="enfant_moins5ans" required>
      <span>femme id</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="femme_id"required>
      <span>Far</span>
      <input placeholder="valeur"  type="number" class="input2" formControlName="femme_far" required>
      <span>Fmar</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="femme_fmar" required>
      <span>Femmes Enceintes</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="femme_femmeEnceinte" required>
      <span>createdAt</span>
      <input placeholder="valeur"  type="date" class="input2" formControlName="createdAt" required>
      <span>updatedAt</span>
      <input placeholder="valeur" type="date" class="input2" formControlName="updatedAt" required>
      <div class="button-container">

      <button  *ngIf="!isDataSaved" type="submit" [disabled]="myForm.invalid " class=" button1 btn1 senda" >Send</button>

      <div class="success1" *ngIf="isDataSaved">
        <div class="check" >
          <mat-icon>check</mat-icon>
        </div>
        <span class="enrg">
        Enregisté
        </span>

      </div>
      <button  class=" button1 btn1 keyboard" *ngIf="isDataSaved" (click)="openModal()">
        <mat-icon>keyboard_tab</mat-icon>
      </button>
      <br><br><br>
      <button  type="button"  (click)="updateLastRecord()" class=" button1 btn1 " *ngIf="isDataSaved">Update data</button>


      </div>
      <button type="button"  *ngIf="isDataSaved" (click)="DeleteLastData()" class=" button1 btn1 ">
        <svg  xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
          <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6Z"/>
          <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1ZM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118ZM2.5 3h11V2h-11v1Z"/>
        </svg>
      </button>
  </div>
</form>
</div>

<div class="Tablecontainer " #test *ngIf="!isTableVisible && isDataSaved">
  <table *ngIf="tableData.length > 0 " id="data-table" class="table custom-table " >
    <thead>
      <tr>
        <th>Population</th>
        <th>Valeur</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of tableData">
        <td>Population rurale</td>
        <td>{{ data.population_rurale }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>les habitants de moins de 3km</td>
        <td>{{ data.population_habitantMoins3km }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>les habitants entre 3km et 6km</td>
        <td>{{ data.population_habitantEntre3km6km }}</td>
       </tr>
        <tr *ngFor="let data of tableData">
          <td>les habitants entre 6km et 10km</td>
        <td>{{ data.population_habitantEntre6km10km }}</td>
       </tr>
       <tr *ngFor="let data of tableData">
        <td>les habitants de plus de 10km</td>
        <td>{{ data.population_habitantPlus10km }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>Population Cible</td>
        <td>{{ data.population_cible }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>Distance Moyenne la plus Route Proche</td>
        <td>{{ data.distanceMoyenneRouteProche }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>Enfant id</td>
        <td>{{ data.enfant_id }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>Naissances Attendues</td>
        <td>{{ data.enfant_naissancesAttendues }}</td>

        <tr *ngFor="let data of tableData">
          <td>Enfant moins de 1ans</td>
        <td>{{ data.enfant_moins1ans }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>Enfant moins de 5ans</td>
        <td>{{ data.enfant_moins5ans }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>Femme id</td>
        <td>{{ data.femme_id }}</td>
       </tr>
       <tr *ngFor="let data of tableData">
        <td>Femme far</td>
        <td>{{ data.femme_far }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>Femmes fmar</td>
        <td>{{ data.femme_fmar }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>Femmes Enceintes</td>
        <td>{{ data.femme_femmeEnceinte }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>Date de cration</td>
        <td>{{ data.createdAt }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>La mise à jour</td>
        <td>{{ data.updatedAt }}</td>
      </tr>
    </tbody>
  </table>
</div>
<button type="button" *ngIf="!isTableVisible && isDataSaved" (click)="downloadTableAsPDF()" class="button1 btn1">Download PDF</button>

<div class="Tablecontainer " #test *ngIf="isTableVisible && isDataSaved">
  <table *ngIf="updatedTableData.length > 0 " id="updated-data-table" class="table custom-table " >
    <thead>
      <tr>
        <th>Population rurale</th>
        <th>Les habitants de moins de 3km</th>
        <th>Les habitants de moins de 3km</th>
        <th>Les habitants entre 3 et 6km</th>
        <th>Les habitants entre 6 et 10km</th>
        <th>Les habitants de plus 10km</th>
        <th>La population cible</th>
        <th>Distance moyenne de la route la plus proche</th>
        <th>Enfant id</th>
        <th>Naissances Attendues</th>
        <th>Les enfants moins 1ans</th>
        <th>Les enfants moins 5ans</th>
        <th>femme id</th>
        <th>Far</th>
        <th>Fmar</th>
        <th>Femmes Enceintes</th>
        <th>createdAt</th>
        <th>updatedAt</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of updatedTableData">

        <td>{{ data.population_rurale }}</td>
        <td>{{ data.population_habitantMoins3km }}</td>
        <td>{{ data.population_habitantEntre3km6km }}</td>
        <td>{{ data.population_habitantEntre6km10km }}</td>
        <td>{{ data.population_habitantPlus10km }}</td>
        <td>{{ data.population_cible }}</td>
        <td>{{ data.distanceMoyenneRouteProche }}</td>
        <td>{{ data.distanceMoyenneRouteProche }}</td>
        <td>{{ data.enfant_id }}</td>
        <td>{{ data.enfant_naissancesAttendues }}</td>
        <td>{{ data.enfant_moins1ans }}</td>
        <td>{{ data.enfant_moins5ans }}</td>
        <td>{{ data.femme_id }}</td>
        <td>{{ data.femme_far }}</td>
        <td>{{ data.femme_fmar }}</td>
        <td>{{ data.femme_femmeEnceinte }}</td>
        <td>{{ data.createdAt }}</td>
        <td>{{ data.updatedAt }}</td>
      </tr>
    </tbody>
  </table>
</div>
<button type="button" *ngIf="isTableVisible && isDataSaved" (click)="downloadTableAsPDF()" class="button1 btn1">Download PDF</button>


