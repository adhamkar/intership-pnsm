<header class="logout">
  <div class="toframe">
    <button class="button1 btn2" (click)="changePwd()">
      modifier mot de passe
  </button>
    <button class=" button1 btn1" (click)="onLogout()">
      logout
  </button>
  <button type="button" class="btn-close close1" aria-label="Close" (click)="closeModal()"></button>
  </div>
</header>

<div class=" reduce">
  <div class="card bg-grd p-2 fs-7 text-white fw-bold text-center">
    Plan d’action des unités médicales mobiles (UMM)
</div>
<h5 class="h5">
  Détails du plan d'action
</h5>
<div class="toCenter">
<form class="form-container" [formGroup]="myRh" (ngSubmit)="getRHData()">
  <div class="form" >
    <h5 class="pop">
      <mat-icon class="people">directions_car</mat-icon>
      Population à couvrir par l'équipe mobile
    </h5>
    <h5 class="pop circle-icon">
      <u>Information sur les ressources Humaines:</u>
    </h5>
    <span>Année</span>
    <input placeholder="valeur" type="date" class="input2" formControlName="year" required>
    <span>Trimestre</span>
    <input placeholder="valeur" type="number" class="input2" formControlName="trimestre" required>
    <span>Sortie id</span>
    <input placeholder="valeur" type="number" class="input2" formControlName="sortie_id" required>
      <h5 class="pop circle-icon">
        <u>Mode fixe:</u>
      </h5>
      <span>Fixe id</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="fixe_id" required>
      <span>Medecin</span>
      <input placeholder="valeur"  type="text" class="input2" formControlName="fixe_medecin" required>
      <span>Infermier</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="fixe_infermier" required>
      <span>Sage Femme</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="fixe_sageFemme" required>
      <span>Chauffeur</span>
      <input placeholder="valeur"  type="number" class="input2" formControlName="fixe_chauffeur" required>
      <span>Appuie</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="fixe_appuie" required>
      <span><mat-checkbox formControlName="fixe_technicien" required>Technicien</mat-checkbox></span><br>
      <h5 class="pop circle-icon">
        <u>Mode mobile :</u>
      </h5>
      <span>Mobile id</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="mobile_id" required>
      <span>Medecin</span>
      <input placeholder="valeur"  type="text" class="input2" formControlName="mobile_medecin" required>
      <span>Infermier</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="mobile_infermier" required>
      <span>Sage Femme</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="mobile_sageFemme" required>
      <span>Chauffeur</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="mobile_chauffeur" required>
      <span>Appuie</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="mobile_appuie" required>
      <span><mat-checkbox formControlName="mobile_technicien" required>Technicien</mat-checkbox></span><br>
      <span>Nombre d’équipes opérationnelle Mobile</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="mobile_emOperationnelle" required>
      <span>CSR id</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="csr_id" required>
      <h5 class="pop circle-icon">
        <u>Ressources Humaine Mobilisé :</u>
      </h5>
      <span>RH id</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="ressourcesHumaineMobilise_id" required>
      <span>Medecin</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="ressourcesHumaineMobilise_medecin" required>
      <span>Infermier</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="ressourcesHumaineMobilise_infermier" required>
      <span>Sage Femme</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="ressourcesHumaineMobilise_sageFemme" required>
      <span>Chauffeur</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="ressourcesHumaineMobilise_chauffeur" required>
      <span>Appui</span>
      <input placeholder="valeur" type="number" class="input2" formControlName="ressourcesHumaineMobilise_appuie" required>
      <span><mat-checkbox formControlName="ressourcesHumaineMobilise_technicien" required>Technicien</mat-checkbox></span>
      <!--

      <input placeholder="valeur" type="checkbox" value="true" class="input2" formControlName="ressourcesHumaineMobilise_technicien" required>
      -->
      <h5 class="pop circle-icon">
        <u>Nombre d’équipes opérationnelle :</u>
      </h5>
      <input placeholder="valeur" type="number" class="input2" formControlName="emOperationnelle" required>
      <div class="button-container">
      <button *ngIf="!isDataSaved" type="submit" [disabled]="myRh.invalid" class=" button1 btn1 " >Send</button>
      <div class="success1" *ngIf="isDataSaved">
        <div class="check">
          <mat-icon>check</mat-icon>
        </div>
        <span class="enrg">
        Enregisté
        </span>

      </div>
      <!--
        <button  class=" button1 btn1 keyboard" *ngIf="isDataSaved" routerLink="/modifierETtelecharger">
        <mat-icon>keyboard_tab</mat-icon>
      </button>
      -->
      <button  type="button"  (click)="updateLastRecord()" class=" button1 btn1 ok" *ngIf="isDataSaved">Update data</button>
      <button type="button" *ngIf="isDataSaved" (click)="DeleteLastData()" class=" button1 btn1 ">
        <svg  xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
          <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6Z"/>
          <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1ZM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118ZM2.5 3h11V2h-11v1Z"/>
        </svg>
      </button>
      </div>

  </div>
</form>
</div>
<br>
<div class="Tablecontainer tab1" #test *ngIf="!isTableVisible && isDataSaved">
  <table *ngIf="tableData.length > 0 " id="data-table" class="table custom-table table-condensed" >
    <thead>
      <tr>
        <th>Ressources Humaines</th>
        <th>Valeur</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of tableData">
        <td>Année</td>
        <td>{{ data.year }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>Trimestre</td>
        <td>{{ data.trimestre }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>Sortie id</td>
        <td>{{ data.sortie_id }}</td>
       </tr>

       <tr>
        <th >Mode fix</th>
      </tr>
        <tr *ngFor="let data of tableData">
          <td>Id</td>
        <td>{{ data.fixe_id }}</td>
       </tr>
       <tr *ngFor="let data of tableData">
        <td>Medecin</td>
        <td>{{ data.fixe_medecin }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>Infermier</td>
        <td>{{ data.fixe_infermier }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>Sage femme</td>
        <td>{{ data.fixe_sageFemme }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>Chaffeur</td>
        <td>{{ data.fixe_chauffeur }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>Appuie</td>
        <td>{{ data.fixe_appuie }}</td>
        <tr>


          <tr>
            <th >Mode mobile </th>
          </tr>
        <tr *ngFor="let data of tableData">
          <td>Id</td>
        <td>{{ data.mobile_id }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>Medecin</td>
        <td>{{ data.mobile_medecin }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>Infermier</td>
        <td>{{ data.mobile_infermier }}</td>
       </tr>
       <tr *ngFor="let data of tableData">
        <td>Chaffeur</td>
        <td>{{ data.mobile_chauffeur }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>Appuie</td>
        <td>{{ data.mobile_appuie }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>Techniciens</td>
        <td>{{ data.mobile_technicien }}</td>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>Employé Operationnel/td>
        <td>{{ data.mobile_emOperationnelle }}</td>
        </tr>
        <tr>
          <th >Ressource Humaines Mobilisées</th>
        </tr>
        <tr *ngFor="let data of tableData">
          <td>CSR id</td>
        <td>{{ data.csr_id }}</td>
      </tr>
      <tr *ngFor="let data of tableData">
        <td>Employé Operationnel</td>
      <td>{{ data.emOperationnelle }}</td>
    </tr>
    <tr *ngFor="let data of tableData">
      <td>Medecin</td>
    <td>{{ data.ressourcesHumaineMobilise_id }}</td>
  </tr>
  <tr *ngFor="let data of tableData">
    <td>La mise à jour</td>

  <td>{{ data.ressourcesHumaineMobilise_medecin }}</td>
</tr>
<tr *ngFor="let data of tableData">
  <td>Infermier</td>
<td>{{ data.ressourcesHumaineMobilise_infermier }}</td>
</tr>
<tr *ngFor="let data of tableData">
  <td>Sage femme</td>
<td>{{ data.ressourcesHumaineMobilise_sageFemme }}</td>
</tr>
<tr *ngFor="let data of tableData">
  <td>Chaffeur</td>
<td>{{ data.ressourcesHumaineMobilise_chauffeur }}</td>
</tr>
<tr *ngFor="let data of tableData">
  <td>Appuie</td>
<td>{{ data.ressourcesHumaineMobilise_appuie }}</td>
</tr>
<tr *ngFor="let data of tableData">
  <td>Technicien</td>
<td>{{ data.ressourcesHumaineMobilise_technicien }}</td>
</tr>
    </tbody>
  </table>
</div>
<br><br><br><br>

<button type="button" *ngIf="!isTableVisible && isDataSaved" (click)="downloadTableAsPDF()" class="button1 btn1">Download PDF</button>

<div class="Tablecontainer" *ngIf="isTableVisible && isDataSaved"  #test>
  <table *ngIf="updatedTableData.length > 0 " id="updated-data-table" class="table custom-table " >
    <thead>
      <tr>
        <th>Année</th>
        <th>Trimestre>
        <th>Sortie ID</th>

        <th>Equipe Fixe ID</th>
        <th>F_Medecin</th>
        <th>F_Infermier</th>
        <th>F_Sage Femme 1</th>
        <th>F_Chauffeur</th>

        <th>Equipe Mobile ID</th>
        <th>M_Medecin</th>
        <th>M_Infermier</th>
        <th>M_Sage Femme</th>
        <th>M_Chauffeur</th>
        <th>M_Appuie</th>
        <th>M_Techicien</th>
        <th>M_Employés Operationnels</th>

        <th>Ressources Humaine Mobilisée ID</th>
        <th>RHM_Medecin</th>
        <th>RHM_Infermier</th>
        <th>RHM_Sage Femme </th>
        <th>RHM_Chauffeur</th>
        <th>RHM_Appuie</th>
        <th>RHM_Techicien</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of updatedTableData">
        <td>{{ data.year }}</td>
        <td>{{ data.trimestre }}</td>
        <td>{{ data.sortie_id }}</td>
        <td>{{ data.fixe_id }}</td>
        <td>{{ data.fixe_medecin }}</td>
        <td>{{ data.fixe_infermier }}</td>
        <td>{{ data.fixe_sageFemme }}</td>
        <td>{{ data.fixe_chauffeur }}</td>
        <td>{{ data.fixe_appuie }}</td>

        <td>{{ data.mobile_id }}</td>
        <td>{{ data.mobile_medecin }}</td>
        <td>{{ data.mobile_infermier }}</td>
        <td>{{ data.mobile_chauffeur }}</td>
        <td>{{ data.mobile_appuie }}</td>
        <td>{{ data.mobile_technicien }}</td>
        <td>{{ data.mobile_emOperationnelle }}</td>
        <td>{{ data.emOperationnelle }}</td>

        <td>{{ data.ressourcesHumaineMobilise_id }}</td>
        <td>{{ data.ressourcesHumaineMobilise_medecin }}</td>
        <td>{{ data.ressourcesHumaineMobilise_infermier }}</td>
        <td>{{ data.ressourcesHumaineMobilise_sageFemme }}</td>
        <td>{{ data.ressourcesHumaineMobilise_chauffeur }}</td>
        <td>{{ data.ressourcesHumaineMobilise_appuie }}</td>
        <td>{{ data.ressourcesHumaineMobilise_technicien }}</td>
      </tr>
    </tbody>
  </table>
</div>
<button type="button" *ngIf="isTableVisible && isDataSaved" (click)="downloadTableAsPDF()" class="button1 btn1">Download PDF</button>

<style>
  .ok{
    margin-left: 18rem;
  }
</style>
